var Query=function(e){"use strict";var t=function(e){var t=[],n,r,i,s;if(typeof e=="undefined"||e===null||e==="")return t;e.indexOf("?")===0&&(e=e.substring(1));r=e.toString().split(/[&;]/);for(n=0;n<r.length;n++){i=r[n];s=i.split("=");t.push([s[0],s[1]])}return t},n=t(e),r=function(){var e="",t,r;for(t=0;t<n.length;t++){r=n[t];e.length>0&&(e+="&");e+=r.join("=")}return e.length>0?"?"+e:e},i=function(e){e=decodeURIComponent(e);e=e.replace("+"," ");return e},s=function(e){var t,r;for(r=0;r<n.length;r++){t=n[r];if(i(e)===i(t[0]))return t[1]}},o=function(e){var t=[],r,s;for(r=0;r<n.length;r++){s=n[r];i(e)===i(s[0])&&t.push(s[1])}return t},u=function(e,t){var r=[],s,o,u,a;for(s=0;s<n.length;s++){o=n[s];u=i(o[0])===i(e);a=i(o[1])===i(t);(arguments.length===1&&!u||arguments.length===2&&!u&&!a)&&r.push(o)}n=r;return this},a=function(e,t,r){if(arguments.length===3&&r!==-1){r=Math.min(r,n.length);n.splice(r,0,[e,t])}else arguments.length>0&&n.push([e,t]);return this},f=function(e,t,r){var s=-1,o,f;if(arguments.length===3){for(o=0;o<n.length;o++){f=n[o];if(i(f[0])===i(e)&&decodeURIComponent(f[1])===i(r)){s=o;break}}u(e,r).addParam(e,t,s)}else{for(o=0;o<n.length;o++){f=n[o];if(i(f[0])===i(e)){s=o;break}}u(e);a(e,t,s)}return this};return{getParamValue:s,getParamValues:o,deleteParam:u,addParam:a,replaceParam:f,toString:r}},Uri=function(e){"use strict";var t=!1,n=function(e){var n={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],i={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},s=n[t?"strict":"loose"].exec(e),o={},u=14;while(u--)o[r[u]]=s[u]||"";o[i.name]={};o[r[12]].replace(i.parser,function(e,t,n){t&&(o[i.name][t]=n)});return o},r=n(e||""),i=new Query(r.query),s=function(e){typeof e!="undefined"&&(r.protocol=e);return r.protocol},o=null,u=function(e){typeof e!="undefined"&&(o=e);return o===null?r.source.indexOf("//")!==-1:o},a=function(e){typeof e!="undefined"&&(r.userInfo=e);return r.userInfo},f=function(e){typeof e!="undefined"&&(r.host=e);return r.host},l=function(e){typeof e!="undefined"&&(r.port=e);return r.port},c=function(e){typeof e!="undefined"&&(r.path=e);return r.path},h=function(e){typeof e!="undefined"&&(i=new Query(e));return i},p=function(e){typeof e!="undefined"&&(r.anchor=e);return r.anchor},d=function(e){s(e);return this},v=function(e){u(e);return this},m=function(e){a(e);return this},g=function(e){f(e);return this},y=function(e){l(e);return this},b=function(e){c(e);return this},w=function(e){h(e);return this},E=function(e){p(e);return this},S=function(e){return h().getParamValue(e)},x=function(e){return h().getParamValues(e)},T=function(e,t){arguments.length===2?h().deleteParam(e,t):h().deleteParam(e);return this},N=function(e,t,n){arguments.length===3?h().addParam(e,t,n):h().addParam(e,t);return this},C=function(e,t,n){arguments.length===3?h().replaceParam(e,t,n):h().replaceParam(e,t);return this},k=function(){var e="",t=function(e){return e!==null&&e!==""};if(t(s())){e+=s();s().indexOf(":")!==s().length-1&&(e+=":");e+="//"}else u()&&t(f())&&(e+="//");if(t(a())&&t(f())){e+=a();a().indexOf("@")!==a().length-1&&(e+="@")}if(t(f())){e+=f();t(l())&&(e+=":"+l())}t(c())?e+=c():t(f())&&(t(h().toString())||t(p()))&&(e+="/");if(t(h().toString())){h().toString().indexOf("?")!==0&&(e+="?");e+=h().toString()}if(t(p())){p().indexOf("#")!==0&&(e+="#");e+=p()}return e},L=function(){return new Uri(k())};return{protocol:s,hasAuthorityPrefix:u,userInfo:a,host:f,port:l,path:c,query:h,anchor:p,setProtocol:d,setHasAuthorityPrefix:v,setUserInfo:m,setHost:g,setPort:y,setPath:b,setQuery:w,setAnchor:E,getQueryParamValue:S,getQueryParamValues:x,deleteQueryParam:T,addQueryParam:N,replaceQueryParam:C,toString:k,clone:L}},jsUri=Uri;(function(e){function u(e){this.imageCandidates=[];this.srcValue=e.src;this.srcsetValue=e.srcset;this.isValid=!0;this.error="";this._parse(this.srcsetValue);this.isValid||console.error("Error: "+this.error)}function a(e){this.src=e.src;this.w=e.w||Infinity;this.h=e.h||Infinity;this.x=e.x||1}var t="[-a-zA-Z0-9@:%_+.~#?&//=]*",n="\\s*("+t+")\\s*([0-9xwh.\\s]*)",r="("+n+",?)+",i=new RegExp(n),s=new RegExp(r),o=/^[0-9]+$/;u.prototype._parse=function(){var e=this.srcsetValue.split(",");for(var t=0;t<e.length;t++){var n=e[t],r=n.match(i),s=r[1],o=this._parseDescriptors(r[2]),u=new a({src:r[1],x:o.x,w:o.w,h:o.h});this._addCandidate(u)}this.srcValue&&this._addCandidate(new a({src:this.srcValue}))};u.prototype._addCandidate=function(e){for(var t=0;t<this.imageCandidates.length;t++){var n=this.imageCandidates[t];if(n.x==e.x&&n.w==e.w&&n.h==e.h)return}this.imageCandidates.push(e)};u.prototype._parseDescriptors=function(e){var t=e.split(/\s/),n={};for(var r=0;r<t.length;r++){var i=t[r];if(i.length>0){var s=i[i.length-1],u=i.substring(0,i.length-1),a=parseInt(u,10),f=parseFloat(u);if(u.match(o)&&s==="w")n[s]=a;else if(u.match(o)&&s=="h")n[s]=a;else if(!isNaN(f)&&s=="x")n[s]=f;else{this.error='Invalid srcset descriptor found in "'+i+'".';this.isValid=!1}}}return n};e.SrcsetInfo=u})(window);(function(e){function t(){this.w=null;this.h=null;this.x=null}t.prototype.compute=function(){this.w=window.innerWidth;this.h=window.innerHeight;this.x=window.devicePixelRatio};t.prototype.setForTesting=function(e){this.w=e.w;this.h=e.h;this.x=e.x};t.prototype.getBestImage=function(e){var t=e.imageCandidates.slice(0),n=this._getBestCandidateIf(t,function(e,t){return e.w>t.w});this._removeCandidatesIf(t,function(e){return e.w<this.w}.bind(this));t.length===0&&(t=[n]);var r=this._getBestCandidateIf(t,function(e,t){return e.h>t.h});this._removeCandidatesIf(t,function(e){return e.h<this.h}.bind(this));t.length===0&&(t=[r]);var i=this._getBestCandidateIf(t,function(e,t){return e.x>t.x});this._removeCandidatesIf(t,function(e){return e.x<this.x}.bind(this));t.length===0&&(t=[i]);var s=this._getBestCandidateIf(t,function(e,t){return e.w<t.w});this._removeCandidatesIf(t,function(e,t){return e.w>s.w});var o=this._getBestCandidateIf(t,function(e,t){return e.h<t.h});this._removeCandidatesIf(t,function(e,t){return e.h>s.h});var u=this._getBestCandidateIf(t,function(e,t){return e.x<t.x});this._removeCandidatesIf(t,function(e,t){return e.x>u.x});return t[0]};t.prototype._getBestCandidateIf=function(e,t){var n=e[0];for(var r=0;r<e.length;r++){var i=e[r];t(i,n)&&(n=i)}return n};t.prototype._removeCandidatesIf=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r)&&e.splice(n,1)}return e};t.prototype.getBestImage2=function(e){var t=null,n=e.imageCandidates;for(var r=0;r<n.length;r++){var i=n[r],s=t?t.x:0;if(s<=i.x&&i.x<=this.x){if(t===null){t=i;continue}this.w<=i.w&&i.w<=t.w&&(t=i)}}return t};e.ViewportInfo=t})(window);(function(e){function t(){var e=new Image;return"srcset"in e}function n(){if(t())return;var e=new ViewportInfo;e.compute();var n=document.querySelectorAll("img");for(var r=0;r<n.length;r++){var i=n[r],s=i.attributes.srcset;if(s){var o=new SrcsetInfo({src:i.src,srcset:s.textContent}),u=e.getBestImage(o);i.src=u.src;if(!(i.width||i.height||i.style.height||i.style.width)){i.style.webkitTransform="scale("+1/u.x+")";i.style.webkitTransformOrigin="0 0"}}}}if(window.addEventListener){window.addEventListener("DOMContentLoaded",function(){n();window.removeEventListener("load",n,!1)},!1);window.addEventListener("load",n,!1)}else window.attachEvent&&window.attachEvent("onload",n)})(window);