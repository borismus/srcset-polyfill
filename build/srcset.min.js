var Query=function(e){"use strict";var t=function(e){var t=[],n,r,i,s;if(typeof e=="undefined"||e===null||e==="")return t;e.indexOf("?")===0&&(e=e.substring(1)),r=e.toString().split(/[&;]/);for(n=0;n<r.length;n++)i=r[n],s=i.split("="),t.push([s[0],s[1]]);return t},n=t(e),r=function(){var e="",t,r;for(t=0;t<n.length;t++)r=n[t],e.length>0&&(e+="&"),e+=r.join("=");return e.length>0?"?"+e:e},i=function(e){return e=decodeURIComponent(e),e=e.replace("+"," "),e},s=function(e){var t,r;for(r=0;r<n.length;r++){t=n[r];if(i(e)===i(t[0]))return t[1]}},o=function(e){var t=[],r,s;for(r=0;r<n.length;r++)s=n[r],i(e)===i(s[0])&&t.push(s[1]);return t},u=function(e,t){var r=[],s,o,u,a;for(s=0;s<n.length;s++)o=n[s],u=i(o[0])===i(e),a=i(o[1])===i(t),(arguments.length===1&&!u||arguments.length===2&&!u&&!a)&&r.push(o);return n=r,this},a=function(e,t,r){return arguments.length===3&&r!==-1?(r=Math.min(r,n.length),n.splice(r,0,[e,t])):arguments.length>0&&n.push([e,t]),this},f=function(e,t,r){var s=-1,o,f;if(arguments.length===3){for(o=0;o<n.length;o++){f=n[o];if(i(f[0])===i(e)&&decodeURIComponent(f[1])===i(r)){s=o;break}}u(e,r).addParam(e,t,s)}else{for(o=0;o<n.length;o++){f=n[o];if(i(f[0])===i(e)){s=o;break}}u(e),a(e,t,s)}return this};return{getParamValue:s,getParamValues:o,deleteParam:u,addParam:a,replaceParam:f,toString:r}},Uri=function(e){"use strict";var t=!1,n=function(e){var n={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],i={name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},s=n[t?"strict":"loose"].exec(e),o={},u=14;while(u--)o[r[u]]=s[u]||"";return o[i.name]={},o[r[12]].replace(i.parser,function(e,t,n){t&&(o[i.name][t]=n)}),o},r=n(e||""),i=new Query(r.query),s=function(e){return typeof e!="undefined"&&(r.protocol=e),r.protocol},o=null,u=function(e){return typeof e!="undefined"&&(o=e),o===null?r.source.indexOf("//")!==-1:o},a=function(e){return typeof e!="undefined"&&(r.userInfo=e),r.userInfo},f=function(e){return typeof e!="undefined"&&(r.host=e),r.host},l=function(e){return typeof e!="undefined"&&(r.port=e),r.port},c=function(e){return typeof e!="undefined"&&(r.path=e),r.path},h=function(e){return typeof e!="undefined"&&(i=new Query(e)),i},p=function(e){return typeof e!="undefined"&&(r.anchor=e),r.anchor},d=function(e){return s(e),this},v=function(e){return u(e),this},m=function(e){return a(e),this},g=function(e){return f(e),this},y=function(e){return l(e),this},b=function(e){return c(e),this},w=function(e){return h(e),this},E=function(e){return p(e),this},S=function(e){return h().getParamValue(e)},x=function(e){return h().getParamValues(e)},T=function(e,t){return arguments.length===2?h().deleteParam(e,t):h().deleteParam(e),this},N=function(e,t,n){return arguments.length===3?h().addParam(e,t,n):h().addParam(e,t),this},C=function(e,t,n){return arguments.length===3?h().replaceParam(e,t,n):h().replaceParam(e,t),this},k=function(){var e="",t=function(e){return e!==null&&e!==""};return t(s())?(e+=s(),s().indexOf(":")!==s().length-1&&(e+=":"),e+="//"):u()&&t(f())&&(e+="//"),t(a())&&t(f())&&(e+=a(),a().indexOf("@")!==a().length-1&&(e+="@")),t(f())&&(e+=f(),t(l())&&(e+=":"+l())),t(c())?e+=c():t(f())&&(t(h().toString())||t(p()))&&(e+="/"),t(h().toString())&&(h().toString().indexOf("?")!==0&&(e+="?"),e+=h().toString()),t(p())&&(p().indexOf("#")!==0&&(e+="#"),e+=p()),e},L=function(){return new Uri(k())};return{protocol:s,hasAuthorityPrefix:u,userInfo:a,host:f,port:l,path:c,query:h,anchor:p,setProtocol:d,setHasAuthorityPrefix:v,setUserInfo:m,setHost:g,setPort:y,setPath:b,setQuery:w,setAnchor:E,getQueryParamValue:S,getQueryParamValues:x,deleteQueryParam:T,addQueryParam:N,replaceQueryParam:C,toString:k,clone:L}},jsUri=Uri;(function(e){function n(e){this.imageCandidates=[],this.srcValue=e.src,this.srcsetValue=e.srcset,this.isValid=!0,this.error="",this._parse(this.srcsetValue),this.isValid||console.error("Error: "+this.error)}function r(e){this.src=e.src,this.w=e.w||Infinity,this.h=e.h||Infinity,this.x=e.x||1}var t=/^[0-9]+$/;n.prototype._parse=function(){var e=this.srcsetValue,t=0,n=[],i,s;while(e!==""){while(e.charAt(0)===" ")e=e.slice(1);t=e.indexOf(" ");if(t!==-1){i=e.slice(0,t);if(i==="")break;e=e.slice(t+1),t=e.indexOf(","),t===-1?(s=e,e=""):(s=e.slice(0,t),e=e.slice(t+1)),n.push({url:i,descriptors:s})}else n.push({url:e,descriptors:""}),e=""}for(var o=0,u=n.length;o<u;o++){var a=n[o],f=this._parseDescriptors(a.descriptors);this._addCandidate(new r({src:a.url,x:f.x,w:f.w,h:f.h}))}this.srcValue&&this._addCandidate(new r({src:this.srcValue}))},n.prototype._addCandidate=function(e){for(var t=0;t<this.imageCandidates.length;t++){var n=this.imageCandidates[t];if(n.x==e.x&&n.w==e.w&&n.h==e.h)return}this.imageCandidates.push(e)},n.prototype._parseDescriptors=function(e){var n=e.split(/\s/),r={};for(var i=0;i<n.length;i++){var s=n[i];if(s.length>0){var o=s[s.length-1],u=s.substring(0,s.length-1),a=parseInt(u,10),f=parseFloat(u);u.match(t)&&o==="w"?r[o]=a:u.match(t)&&o=="h"?r[o]=a:!isNaN(f)&&o=="x"?r[o]=f:(this.error='Invalid srcset descriptor found in "'+s+'".',this.isValid=!1)}}return r},e.SrcsetInfo=n})(window),function(e){function t(){this.w=null,this.h=null,this.x=null}t.prototype.compute=function(){this.w=window.innerWidth,this.h=window.innerHeight,this.x=window.devicePixelRatio},t.prototype.setForTesting=function(e){this.w=e.w,this.h=e.h,this.x=e.x},t.prototype.getBestImage=function(e){var t=e.imageCandidates.slice(0),n=this._getBestCandidateIf(t,function(e,t){return e.w>t.w});this._removeCandidatesIf(t,function(e){return e.w<this.w}.bind(this)),t.length===0&&(t=[n]);var r=this._getBestCandidateIf(t,function(e,t){return e.h>t.h});this._removeCandidatesIf(t,function(e){return e.h<this.h}.bind(this)),t.length===0&&(t=[r]);var i=this._getBestCandidateIf(t,function(e,t){return e.x>t.x});this._removeCandidatesIf(t,function(e){return e.x<this.x}.bind(this)),t.length===0&&(t=[i]);var s=this._getBestCandidateIf(t,function(e,t){return e.w<t.w});this._removeCandidatesIf(t,function(e,t){return e.w>s.w});var o=this._getBestCandidateIf(t,function(e,t){return e.h<t.h});this._removeCandidatesIf(t,function(e,t){return e.h>s.h});var u=this._getBestCandidateIf(t,function(e,t){return e.x<t.x});return this._removeCandidatesIf(t,function(e,t){return e.x>u.x}),t[0]},t.prototype._getBestCandidateIf=function(e,t){var n=e[0];for(var r=0;r<e.length;r++){var i=e[r];t(i,n)&&(n=i)}return n},t.prototype._removeCandidatesIf=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];t(r)&&e.splice(n,1)}return e},t.prototype.getBestImage2=function(e){var t=null,n=e.imageCandidates;for(var r=0;r<n.length;r++){var i=n[r],s=t?t.x:0;if(s<=i.x&&i.x<=this.x){if(t===null){t=i;continue}this.w<=i.w&&i.w<=t.w&&(t=i)}}return t},e.ViewportInfo=t}(window),function(e){function t(){var e=new Image;return"srcset"in e}function n(){if(t())return;var e=new ViewportInfo;e.compute();var n=document.querySelectorAll("img");for(var r=0;r<n.length;r++){var i=n[r],s=i.attributes.srcset;if(s){var o=new SrcsetInfo({src:i.src,srcset:s.textContent}),u=e.getBestImage(o);i.src=u.src,i.style.webkitTransform="scale("+1/u.x+")",i.style.webkitTransformOrigin="0 0"}}}window.addEventListener("DOMContentLoaded",n)}(window);