(function(t){function e(t){this.imageCandidates=[],this.srcValue=t.src,this.srcsetValue=t.srcset,this.isValid=!0,this.error="",this._parse(this.srcsetValue),this.isValid||console.error("Error: "+this.error)}function i(t){this.src=t.src,this.w=t.w||1/0,this.h=t.h||1/0,this.x=t.x||1}var n=/^[0-9]+$/;e.prototype._parse=function(){for(var t,e,n=this.srcsetValue,r=0,s=[];""!==n;){for(;" "===n.charAt(0);)n=n.slice(1);if(r=n.indexOf(" "),-1!==r){if(t=n.slice(0,r),""===t)break;n=n.slice(r+1),r=n.indexOf(","),-1===r?(e=n,n=""):(e=n.slice(0,r),n=n.slice(r+1)),s.push({url:t,descriptors:e})}else s.push({url:n,descriptors:""}),n=""}for(var a=0,o=s.length;o>a;a++){var h=s[a],c=this._parseDescriptors(h.descriptors);this._addCandidate(new i({src:h.url,x:c.x,w:c.w,h:c.h}))}this.srcValue&&this._addCandidate(new i({src:this.srcValue}))},e.prototype._addCandidate=function(t){for(var e=0;this.imageCandidates.length>e;e++){var i=this.imageCandidates[e];if(i.x==t.x&&i.w==t.w&&i.h==t.h)return}this.imageCandidates.push(t)},e.prototype._parseDescriptors=function(t){for(var e=t.split(/\s/),i={},r=0;e.length>r;r++){var s=e[r];if(s.length>0){var a=s[s.length-1],o=s.substring(0,s.length-1),h=parseInt(o,10),c=parseFloat(o);o.match(n)&&"w"===a?i[a]=h:o.match(n)&&"h"==a?i[a]=h:isNaN(c)||"x"!=a?(this.error='Invalid srcset descriptor found in "'+s+'".',this.isValid=!1):i[a]=c}}return i},t.SrcsetInfo=e})(window),function(t){function e(){this.w=null,this.h=null,this.x=null}e.prototype.compute=function(){this.w=window.innerWidth||document.documentElement.clientWidth,this.h=window.innerHeight||document.documentElement.clientHeight,this.x=window.devicePixelRatio},e.prototype.setForTesting=function(t){this.w=t.w,this.h=t.h,this.x=t.x},e.prototype.getBestImage=function(t){var e=t.imageCandidates.slice(0),i=this._getBestCandidateIf(e,function(t,e){return t.w>e.w});this._removeCandidatesIf(e,function(t){return function(e){return e.w<t.w}}(this)),0===e.length&&(e=[i]);var n=this._getBestCandidateIf(e,function(t,e){return t.h>e.h});this._removeCandidatesIf(e,function(t){return function(e){return e.h<t.h}}(this)),0===e.length&&(e=[n]);var r=this._getBestCandidateIf(e,function(t,e){return t.x>e.x});this._removeCandidatesIf(e,function(t){return function(e){return e.x<t.x}}(this)),0===e.length&&(e=[r]);var s=this._getBestCandidateIf(e,function(t,e){return t.w<e.w});this._removeCandidatesIf(e,function(t){return t.w>s.w}),this._getBestCandidateIf(e,function(t,e){return t.h<e.h}),this._removeCandidatesIf(e,function(t){return t.h>s.h});var a=this._getBestCandidateIf(e,function(t,e){return t.x<e.x});return this._removeCandidatesIf(e,function(t){return t.x>a.x}),e[0]},e.prototype._getBestCandidateIf=function(t,e){for(var i=t[0],n=0;t.length>n;n++){var r=t[n];e(r,i)&&(i=r)}return i},e.prototype._removeCandidatesIf=function(t,e){for(var i=t.length-1;i>=0;i--){var n=t[i];e(n)&&t.splice(i,1)}return t},e.prototype.getBestImage2=function(t){for(var e=null,i=t.imageCandidates,n=0;i.length>n;n++){var r=i[n],s=e?e.x:0;if(r.x>=s&&r.x<=this.x){if(null===e){e=r;continue}this.w<=r.w&&r.w<=e.w&&(e=r)}}return e},t.ViewportInfo=e}(window),function(){function t(){var t=new Image;return"srcset"in t}function e(){if(!t()){var e=new ViewportInfo;e.compute();for(var i=document.querySelectorAll("img"),n=0;i.length>n;n++){var r=i[n],s=r.getAttribute("srcset");if(s){var a=new SrcsetInfo({src:r.src,srcset:s}),o=e.getBestImage(a);r.src=o.src,r.width||r.height||r.style.height||r.style.width||(r.style.webkitTransform="scale("+1/o.x+")",r.style.webkitTransformOrigin="0 0")}}}}var i=setInterval(function(){"complete"===document.readyState&&(e(),clearInterval(i))},10)}(window);